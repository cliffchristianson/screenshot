<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Screentshot</title>
    <link rel="stylesheet" href="/index.css">
  </head>
  <body>
    <h1>Cliff HERE!!!!</h1>
    <div id="capture">
      <img class="image" src="/test_image.jpg" />
      <img id="replaceImage" >
    </div>
	<script src="/html2canvas.min.js"></script>
  <script>
    html2canvas(document.body).then(function(canvas) {
      console.log("CLiff here getting screenshot!");
      // document.body.appendChild(canvas);
      var myImage = canvas.toDataURL("image/png");
      var existingImage = document.getElementById('replaceImage');
      existingImage.src = myImage;
      var http = new XMLHttpRequest();
      var url = "http://localhost:3000";
      http.open('POST', url, true);
      http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
      http.onload = function () {
        console.log( this.responseText );
      }
      console.log( myImage );
      http.send( "img="+encodeURIComponent(myImage) );
    });
  </script>
  </body>
</html>